<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Gw2 Checklist</title>    
    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <!-- semantic -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css">
    <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js"></script>
    <!-- fisierul cu tasks -->
    <script type="text/javascript" src="tasks.js"></script>

    <style>
        #titlu {
            text-align: center;
        }
        .ui.checkbox {
            margin-bottom: 0.5rem;
        }
    </style>

    <script>
        $(document).ready(function() {
            for (let i = 0; i < daily.length; i++) {
                var dailyTask = daily[i];
                var divDailyTask = document.getElementById("divDailyTask");
                divDailyTask.innerHTML = divDailyTask.innerHTML +
                    '<div class="ui checkbox daily" id="daily'+i+'"> <input type="checkbox"> <label>'+dailyTask+'</label> </div> <br>';                
            };

            for (let x = 0; x < weekly.length; x++) {
                var weeklyTask = weekly[x];
                var divWeeklyTask = document.getElementById("divWeeklyTask");
                divWeeklyTask.innerHTML = divWeeklyTask.innerHTML +
                    '<div class="ui checkbox weekly" id="weekly'+x+'"> <input type="checkbox"> <label>'+weeklyTask+'</label> </div> <br>';
            };

            $("input:checkbox").click(function(event) {
                if (this.checked) {
                    localStorage[this.parentElement.id] = 1;
                } else {
                    localStorage[this.parentElement.id] = 0;
                }
            });
        });
        
        function clearDailyTasks() {
            var dailyInputs = document.getElementsByClassName("ui checkbox daily");
            for (let o = 0; o < dailyInputs.length; o++) {
                dailyInputs[o].children[0].checked = false;
            }
            for (let i = 0; i < daily.length; i++) {
                localStorage['daily'+i] = 0;
            }
        };
        
        function clearWeeklyTasks() {
            var weeklyInputs = document.getElementsByClassName("ui checkbox weekly");
            for (let p = 0; p < weeklyInputs.length; p++) {
                weeklyInputs[p].children[0].checked = false;
            }
            for (let x = 0; x < weekly.length; x++) {
                localStorage['weekly'+x] = 0;
            }
        };

        function bifeazaDinCache() {
            for (let i = 0; i < daily.length; i++) {
                if ( localStorage['daily'+i] == 1 ) {
                    document.getElementById('daily'+i).children[0].checked = true;
                }  
            };
            for (let x = 0; x < weekly.length; x++) {
                if ( localStorage['weekly'+x] == 1 ) {
                    document.getElementById('weekly'+x).children[0].checked = true;
                }
            }
        };

        const myTimeout = setTimeout(bifeazaDinCache, 200);
    </script>
</head>
<body style="background-color: rgb(129, 111, 111);">
    <div class="ui container" id="titlu"><h1>Gw2 Checklist</h1></div>
    <div class="ui container" id="divDailyTask"><h3>Daily  <button class="ui mini button" onclick="clearDailyTasks()">Clear</button></h3></div>
    <br>
    <div class="ui container" id="divWeeklyTask"><h3>Weekly <button class="ui mini button" onclick="clearWeeklyTasks()">Clear</button></h3></div>
    <div class="ui divider"></div>
    <div class="ui container"> Dw R F' U R' F Dw'  <aÂ href="https://www.youtube.com/watch?v=kUSK8EXwhwQ&ab_channel=TheCubeSolver/">Link Youtube</a> </div>
</body>
</html>
